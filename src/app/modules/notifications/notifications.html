<div class="container mx-auto flex flex-col p-4 gap-4">
    <h1 class="text-2xl text-primary font-bold">Notificações</h1>
    
    <div class="flex flex-col sm:flex-row justify-start gap-2 overflow-x-auto">
        <button class="btn btn-outline btn-sm text-xs sm:text-sm"
                (click)="loadAll()" >
            Todas as notificações
        </button>
        <button class="btn btn-outline btn-sm text-xs sm:text-sm"
                (click)="loadUnread()" >
            Apenas não lidas
        </button>
        <button class="btn btn-primary btn-sm text-xs sm:text-sm" 
                (click)="markAllAsRead()" 
                [disabled]="unreadCount() === 0" >
            Marcar todas como lidas
        </button>
    </div>

    <div class="space-y-4">
        @for (notification of notifications(); track notification.id) {
        <div class="card bg-base-100 shadow" 
             [class.border-l-2]="notification.active"
             [class.border-primary]="notification.active">
            
            <div class="card-body">
                <div class="flex justify-between text-primary">
                    <h3 class="text-sm sm:card-title">{{ notification.title }}</h3>
                    <span class="badge text-xs sm:text-sm" 
                          [class.badge-primary]="notification.active"
                          [class.badge-outline]="!notification.active">
                        {{ notification.active ? 'Nova' : 'Lida' }}
                    </span>
                </div>

                <p class="text-base-content">{{ notification.message }}</p>
                <div class="card-actions justify-between items-center">
                    <span class="text-sm text-base-content/60">
                        {{ notification.createdAt | date : 'short' }}
                    </span>

                    @if (notification.active) {
                    <button (click)="markAsRead(notification.id)" 
                            class="btn btn-sm">
                    Marcar como lida
                    </button>
                    }
                </div>
            </div>
        </div>
    } @empty {
        <div class="text-center py-8 text-gray-500">
            Nenhuma notificação encontrada
        </div>
    }
    </div>
</div>